"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.route53Construct = void 0;
const constructs_1 = require("constructs");
const route53 = require("aws-cdk-lib/aws-route53");
const route53Targets = require("aws-cdk-lib/aws-route53-targets");
// スタックではないけど、スタックの部品として小分けにできる
class route53Construct extends constructs_1.Construct {
    constructor(scope, id, props) {
        super(scope, id); // 中身の動きは知らなくていい。スタックを作るうえで必要だから渡してあげる。
        // 2
        // Route53
        const hostedZone = route53.HostedZone.fromLookup(this, "HostedZone", {
            domainName: props.hostZoneName,
        });
        // 2 → 3
        // レコード
        const appPropsForRoute53Records = {
            zone: hostedZone,
            recordName: props.appCustomDomainName,
            target: route53.RecordTarget.fromAlias(new route53Targets.CloudFrontTarget(props.cfDist)),
        };
        const apiPropsForRoute53Records = {
            zone: hostedZone,
            recordName: props.apiCustomDomainName,
            target: route53.RecordTarget.fromAlias(
            // CloudFrontだったりAPI Gatewayだったりのターゲット（普通はIPアドレス）
            new route53Targets.ApiGateway(props.api)),
        };
        // レコードを追加
        new route53.ARecord(this, "appARecord", appPropsForRoute53Records);
        new route53.AaaaRecord(this, "appAaaaRecord", appPropsForRoute53Records);
        new route53.ARecord(this, "apiARecord", apiPropsForRoute53Records);
        new route53.AaaaRecord(this, "apiAaaaRecord", apiPropsForRoute53Records);
    }
}
exports.route53Construct = route53Construct;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGU1My5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJvdXRlNTMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsMkNBQXVDO0FBS3ZDLG1EQUFtRDtBQUNuRCxrRUFBa0U7QUFTbEUsK0JBQStCO0FBQy9CLE1BQWEsZ0JBQWlCLFNBQVEsc0JBQVM7SUFDN0MsWUFBWSxLQUFnQixFQUFFLEVBQVUsRUFBRSxLQUE0QjtRQUNwRSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsdUNBQXVDO1FBRXpELElBQUk7UUFDSixVQUFVO1FBQ1YsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLFlBQVksRUFBRTtZQUNuRSxVQUFVLEVBQUUsS0FBSyxDQUFDLFlBQVk7U0FDL0IsQ0FBQyxDQUFDO1FBRUgsUUFBUTtRQUNSLE9BQU87UUFDUCxNQUFNLHlCQUF5QixHQUFHO1lBQ2hDLElBQUksRUFBRSxVQUFVO1lBQ2hCLFVBQVUsRUFBRSxLQUFLLENBQUMsbUJBQW1CO1lBQ3JDLE1BQU0sRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FDcEMsSUFBSSxjQUFjLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUNsRDtTQUNGLENBQUM7UUFFRixNQUFNLHlCQUF5QixHQUFHO1lBQ2hDLElBQUksRUFBRSxVQUFVO1lBQ2hCLFVBQVUsRUFBRSxLQUFLLENBQUMsbUJBQW1CO1lBQ3JDLE1BQU0sRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLFNBQVM7WUFDcEMsaURBQWlEO1lBQ2pELElBQUksY0FBYyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQ3pDO1NBQ0YsQ0FBQztRQUNGLFVBQVU7UUFDVixJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLFlBQVksRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO1FBQ25FLElBQUksT0FBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsZUFBZSxFQUFFLHlCQUF5QixDQUFDLENBQUM7UUFDekUsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxZQUFZLEVBQUUseUJBQXlCLENBQUMsQ0FBQztRQUNuRSxJQUFJLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLGVBQWUsRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO0lBQzNFLENBQUM7Q0FDRjtBQWxDRCw0Q0FrQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjZGsgZnJvbSBcImF3cy1jZGstbGliXCI7XG5pbXBvcnQgeyBDb25zdHJ1Y3QgfSBmcm9tIFwiY29uc3RydWN0c1wiO1xuaW1wb3J0ICogYXMgczMgZnJvbSBcImF3cy1jZGstbGliL2F3cy1zM1wiO1xuaW1wb3J0ICogYXMgY2xvdWRmcm9udCBmcm9tIFwiYXdzLWNkay1saWIvYXdzLWNsb3VkZnJvbnRcIjtcbmltcG9ydCAqIGFzIGlhbSBmcm9tIFwiYXdzLWNkay1saWIvYXdzLWlhbVwiO1xuaW1wb3J0ICogYXMgYWNtIGZyb20gXCJhd3MtY2RrLWxpYi9hd3MtY2VydGlmaWNhdGVtYW5hZ2VyXCI7XG5pbXBvcnQgKiBhcyByb3V0ZTUzIGZyb20gXCJhd3MtY2RrLWxpYi9hd3Mtcm91dGU1M1wiO1xuaW1wb3J0ICogYXMgcm91dGU1M1RhcmdldHMgZnJvbSBcImF3cy1jZGstbGliL2F3cy1yb3V0ZTUzLXRhcmdldHNcIjtcbmludGVyZmFjZSByb3V0ZTUzQ29uc3RydWN0UHJvcHMgZXh0ZW5kcyBjZGsuU3RhY2tQcm9wcyB7XG4gIGhvc3Rab25lTmFtZTogc3RyaW5nO1xuICBhcHBDdXN0b21Eb21haW5OYW1lOiBzdHJpbmc7XG4gIGNmRGlzdDogY2RrLmF3c19jbG91ZGZyb250LklEaXN0cmlidXRpb247XG4gIGFwaUN1c3RvbURvbWFpbk5hbWU6IHN0cmluZztcbiAgYXBpOiBjZGsuYXdzX2FwaWdhdGV3YXkuUmVzdEFwaTtcbn1cblxuLy8g44K544K/44OD44Kv44Gn44Gv44Gq44GE44GR44Gp44CB44K544K/44OD44Kv44Gu6YOo5ZOB44Go44GX44Gm5bCP5YiG44GR44Gr44Gn44GN44KLXG5leHBvcnQgY2xhc3Mgcm91dGU1M0NvbnN0cnVjdCBleHRlbmRzIENvbnN0cnVjdCB7XG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBDb25zdHJ1Y3QsIGlkOiBzdHJpbmcsIHByb3BzOiByb3V0ZTUzQ29uc3RydWN0UHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQpOyAvLyDkuK3ouqvjga7li5XjgY3jga/nn6XjgonjgarjgY/jgabjgYTjgYTjgILjgrnjgr/jg4Pjgq/jgpLkvZzjgovjgYbjgYjjgaflv4XopoHjgaDjgYvjgonmuKHjgZfjgabjgYLjgZLjgovjgIJcblxuICAgIC8vIDJcbiAgICAvLyBSb3V0ZTUzXG4gICAgY29uc3QgaG9zdGVkWm9uZSA9IHJvdXRlNTMuSG9zdGVkWm9uZS5mcm9tTG9va3VwKHRoaXMsIFwiSG9zdGVkWm9uZVwiLCB7XG4gICAgICBkb21haW5OYW1lOiBwcm9wcy5ob3N0Wm9uZU5hbWUsXG4gICAgfSk7XG5cbiAgICAvLyAyIOKGkiAzXG4gICAgLy8g44Os44Kz44O844OJXG4gICAgY29uc3QgYXBwUHJvcHNGb3JSb3V0ZTUzUmVjb3JkcyA9IHtcbiAgICAgIHpvbmU6IGhvc3RlZFpvbmUsXG4gICAgICByZWNvcmROYW1lOiBwcm9wcy5hcHBDdXN0b21Eb21haW5OYW1lLFxuICAgICAgdGFyZ2V0OiByb3V0ZTUzLlJlY29yZFRhcmdldC5mcm9tQWxpYXMoXG4gICAgICAgIG5ldyByb3V0ZTUzVGFyZ2V0cy5DbG91ZEZyb250VGFyZ2V0KHByb3BzLmNmRGlzdClcbiAgICAgICksXG4gICAgfTtcblxuICAgIGNvbnN0IGFwaVByb3BzRm9yUm91dGU1M1JlY29yZHMgPSB7XG4gICAgICB6b25lOiBob3N0ZWRab25lLCAvLyByb3V0ZTUz44Gu44Gp44Gu44Ob44K544OI44K+44O844Oz44Gr5a++44GX44Gm44Gu44KE44Gk44GLXG4gICAgICByZWNvcmROYW1lOiBwcm9wcy5hcGlDdXN0b21Eb21haW5OYW1lLCAvLyDlrp/pmpvjgavkvb/nlKjjgZfjgZ/jgYTjg4njg6HjgqTjg7PlkI1cbiAgICAgIHRhcmdldDogcm91dGU1My5SZWNvcmRUYXJnZXQuZnJvbUFsaWFzKFxuICAgICAgICAvLyBDbG91ZEZyb25044Gg44Gj44Gf44KKQVBJIEdhdGV3YXnjgaDjgaPjgZ/jgorjga7jgr/jg7zjgrLjg4Pjg4jvvIjmma7pgJrjga9JUOOCouODieODrOOCue+8iVxuICAgICAgICBuZXcgcm91dGU1M1RhcmdldHMuQXBpR2F0ZXdheShwcm9wcy5hcGkpXG4gICAgICApLFxuICAgIH07XG4gICAgLy8g44Os44Kz44O844OJ44KS6L+95YqgXG4gICAgbmV3IHJvdXRlNTMuQVJlY29yZCh0aGlzLCBcImFwcEFSZWNvcmRcIiwgYXBwUHJvcHNGb3JSb3V0ZTUzUmVjb3Jkcyk7XG4gICAgbmV3IHJvdXRlNTMuQWFhYVJlY29yZCh0aGlzLCBcImFwcEFhYWFSZWNvcmRcIiwgYXBwUHJvcHNGb3JSb3V0ZTUzUmVjb3Jkcyk7XG4gICAgbmV3IHJvdXRlNTMuQVJlY29yZCh0aGlzLCBcImFwaUFSZWNvcmRcIiwgYXBpUHJvcHNGb3JSb3V0ZTUzUmVjb3Jkcyk7XG4gICAgbmV3IHJvdXRlNTMuQWFhYVJlY29yZCh0aGlzLCBcImFwaUFhYWFSZWNvcmRcIiwgYXBpUHJvcHNGb3JSb3V0ZTUzUmVjb3Jkcyk7XG4gIH1cbn1cbiJdfQ==